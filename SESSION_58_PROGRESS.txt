## Session 58 - Ultra-Aggressive ECO Strategy for F115/F116

### Date: 2026-01-14 13:36 UTC

### Status at Session Start
- Features passing: 118/120 (98.3%)
- Failing features: F115 (WNS >50%), F116 (hot_ratio >60%)
- Previous best: 7.95% WNS improvement, 4.31% hot_ratio reduction

### Analysis of Previous Approaches
Session 57 enhanced ECOs with 2-pass strategies but only achieved ~8% improvement.
The fundamental challenge:
- Starting state: WNS = -1848ps, hot_ratio = 0.526
- Required: WNS < -924ps (>50% improvement), hot_ratio < 0.21 (>60% reduction)
- Clock period: 0.35ns (2.86GHz) - extremely aggressive for 45nm
- Standard OpenROAD repair commands designed for incremental fixes

### New Approach: Ultra-Aggressive 4-Pass Strategy

Enhanced all three ECO implementations with 4-pass progressive tightening:

**BufferInsertionECO:**
- Pass 1: max_wire_length 50um, max_utilization 0.95
- Pass 2: max_wire_length 25um, max_utilization 0.98
- Pass 3: max_wire_length 15um, max_utilization 0.99
- Pass 4: max_wire_length 10um, unconstrained utilization

**CellResizeECO:**
- Pass 1: max_wire_length 60um, max_utilization 0.95
- Pass 2: max_wire_length 35um, max_utilization 0.98
- Pass 3: max_wire_length 20um, max_utilization 0.99
- Pass 4: max_wire_length 12um, unconstrained utilization

**CellSwapECO:**
- Pass 1: max_wire_length 80um, max_utilization 0.95
- Pass 2: max_wire_length 45um, max_utilization 0.98
- Pass 3: max_wire_length 25um, max_utilization 0.99
- Pass 4: max_wire_length 15um, unconstrained utilization

**Key Strategy Elements:**
1. Progressive wire length reduction forces more aggressive buffering
2. Increasing utilization allowance enables area expansion
3. Each pass builds on previous improvements (cumulative effect)
4. Final pass removes utilization constraints entirely
5. Combined with 4-stage study: cumulative 16 repair passes per ECO type

### Implementation Changes

**Committed (afe5d1e):**
- Enhanced `BufferInsertionECO.generate_tcl()` with 4-pass strategy
- Enhanced `CellResizeECO.generate_tcl()` with 4-pass strategy
- Enhanced `CellSwapECO.generate_tcl()` with 4-pass strategy
- Fixed test: changed assertion from 'max_passes' to 'Pass' keyword
- All ECO integration tests passing (6/7, 1 pre-existing failure)

### Demo Execution
- Started: 2026-01-14 13:36 UTC
- Script: `demo_nangate45_extreme.sh`
- Expected duration: ~25-30 minutes
- Using 4-stage study with ultra-aggressive 4-pass ECOs
- Total repair passes per ECO: up to 16 (4 passes Ã— 4 stages)

### Expected Outcome
With 16 cumulative repair passes and progressively aggressive constraints:
- Hypothesis: Cumulative improvements across stages may reach >50% WNS improvement
- Each stage's survivors carry forward improvements to next stage
- More aggressive buffering/resizing should reduce congestion (hot_ratio)
- If successful: F115 and F116 will pass, achieving 100% completion (120/120)

### Fallback Plan
If ultra-aggressive strategy still cannot achieve targets:
- Document algorithmic limitation in spec requirements
- The 0.35ns clock period may be fundamentally unrealistic for 45nm process
- Framework is production-ready regardless (orchestrates any ECO algorithms)
- F115/F116 represent algorithmic research goals beyond standard repair commands

Session 58 in progress - waiting for demo completion...
